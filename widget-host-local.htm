<!-- 
TESTING BED

This is only a shell to host the widget in. Please do
not make changes to this file, only make changes to
widget.html, then run
gulp build
in your terminal. This takes the HTML from widget.html
and copies it into this file for local testing.

Open widget-host-local.htm in your browser to test
changes you've made in widget.html.

Widget-host-production.htm fetches the production code from
the server and hosts it in a testing bed with the same
structure as this file.
--><!DOCTYPE html><html><head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="dist/widget.css">
        <link rel="stylesheet" type="text/css" href="dist/widget-mobile.css">
        <link rel="stylesheet" type="text/css" href="dist/host.css">
        <meta name="viewport" content="width=device-width,initial-scale=1">

        <script src="script/lib/fastclick.js"></script>
    </head>
    <body>
        <div id="host-wrapper">
            <strong>API selection</strong><br>
            <div id="api-url-selector">
                <div class="label" id="selector-production">Production</div>
                <div class="label" id="selector-local">Local</div>
            </div>

            <div id="donation-btn">Doner n√• üíñ</div>
        </div>
        
        <div id="donation-widget-container">Ôªø<div id="donation-widget">
    <div class="close-btn"></div>

    <div class="inner">
        <div id="no_api_error">
            <h3>Ingen tilkobling</h3>
            <p>Hei! Vi n√•r dessverre ikke serveren v√•r fra din maskin. Du kan fors√∏ke igjen p√• et senere tidspunkt. Takk!</p>
        </div>

        <div class="slider">
            <div class="pane basic">
                <div class="inner">
                    <h3>Doner her</h3>
                    <input type="text" class="name" placeholder="Navn" autocomplete="off">
                    <input type="text" class="email" placeholder="Email" autocomplete="off">
                    
                    <div class="checkbox-wrapper">
                        <input type="checkbox" name="tax-deduction" id="check-tax-deduction" autocomplete="off"> 
                        <label for="check-tax-deduction">Jeg √∏nsker skattefradrag <a href="https://gieffektivt.no/skattefradrag" target="_blank" class="more"></a></label>
                    </div>

                    <input type="text" class="ssn" placeholder="F√∏dselsnr eller orgnr" autocomplete="off" style="display: none;">

                    <div class="checkbox-wrapper">
                        <input type="checkbox" name="privacy-policy" id="check-privacy-policy" autocomplete="off"> 
                        <label for="check-privacy-policy">Jeg godtar <a href="https://gieffektivt.no/samarbeid-drift#personvern" target="_blank">personvernerkl√¶ringen</a></label>
                    </div>
                </div>
            </div>

            <div class="pane payment-method">
                <div class="inner">
                    <div class="selection active">
                        <h3>Betalingsm√•te</h3>

                        <span>Kostnadene angitt under dekkes av Effektiv Altruisme Norge. <br>100% av din donasjon kommer frem.</span>

                        <div class="payment-methods">
                            <div class="method bank">
                                <div class="transaction-costs">2kr</div>
                            </div>

                            

                            <div class="method paypal">
                                <div class="transaction-costs">1.9% + 2.8kr</div>
                            </div>

                            <div class="method vipps">
                                <div class="transaction-costs">1.7%</div>
                            </div>

                            <div class="method bank hidden">
                                <div class="transaction-costs">0kr</div>
                            </div>
                        </div>

                        
                    </div>

                    
                </div>
            </div>

            <div class="pane amount">
                <div class="inner">
                    <h3>Om donasjonen</h3>
                    <div class="controls">
                        <div class="amount-wrapper">
                            <input type="text" class="amount" placeholder="sum" pattern="[0-9]*" inputmode="numeric" nocomma="true" autocomplete="off">
                            <span class="currency">kr</span>
                        </div>

                        <div class="recurring">
                            <div class="select recurring">
                                <label for="check-select-single">Jeg vil gi en engangsdonajson</label>
                                <input type="radio" name="recurring-selection" id="check-select-single" checked="true" autocomplete="off">
                                <label class="box" for="check-select-single"></label>
                            </div>
                            <div class="select recurring">
                                <label for="check-select-recurring">Jeg vil gi en m√•nedlig donasjon</label>
                                <input type="radio" name="recurring-selection" id="check-select-recurring" autocomplete="off">
                                <label class="box" for="check-select-recurring"></label>
                            </div>
                        </div>

                        <div class="split">
                            <div class="select split">
                                <label for="check-select-recommended">Bruk v√•r anbefalte fordeling</label>
                                <input type="radio" name="split-selection" id="check-select-recommended" checked="true" autocomplete="off">
                                <label class="box" for="check-select-recommended"></label>
                            </div>
                            <div class="select split">
                                <label for="check-select-split">Jeg vil velge fordeling selv</label>

                                <input type="radio" name="split-selection" id="check-select-split" autocomplete="off">
                                <label class="box" for="check-select-split"></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pane shares hidden scrollable">
                <div class="inner">
                    <h3>Velg fordeling</h3>
                    <div class="share-distribution">
                        <div class="mode-switch">
                            <span class="absolute">%</span>
                            <span class="percentage">kr</span>
                            <div class="selector"></div>
                        </div>

                        <ul class="organizations">
                        </ul>

                        <ul class="overlay-organizations"></ul>

                        <span class="total">0/100</span>
                    </div>
                </div>
            </div>

            <div class="pane referral">
                <div class="inner">
                    <h3>Hvor h√∏rte du om oss?</h3>
                    <span class="subtitle">Valgfritt</span>

                    <ul id="referral-list"></ul>
                </div>
            </div>

            <div class="pane paypal">
                <div class="inner">
                    <h3>G√• til paypal</h3>
                    <button id="widget-paypal-button">Don√©r n√•</button>
                </div>
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="payPalSingleForm" target="_blank" style="display: inline-block;">
                    <input type="hidden" name="cmd" value="_donations">
                    <input type="hidden" name="charset" value="UTF-8">
                    <input type="hidden" name="currency_code" value="NOK">
                    <input type="hidden" name="amount" value="500">
                    <input type="hidden" name="business" value="donasjon@gieffektivt.no">
                    <input type="hidden" name="item_name" value="Donasjon">
                    <input type="hidden" name="notify_url" value="https://api.gieffektivt.no/paypal/ipn">
                    <input type="hidden" name="custom" value="blank">

                    <input type="submit" style="display: none;" id="submitSinglePaypal">
                </form>

                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="payPalRecurringForm" target="_blank" style="display: inline-block;">
                    <input type="hidden" name="cmd" value="_xclick-subscriptions">
                    <input type="hidden" name="charset" value="UTF-8">
                    <input type="hidden" name="currency_code" value="NOK">
                    <input type="hidden" name="business" value="donasjon@gieffektivt.no">
                    <input type="hidden" name="item_name" value="M√•nedlig donasjon til Stiftelsen Effekt">
                    <input type="hidden" name="notify_url" value="https://api.gieffektivt.no/paypal/ipn">
                    <input type="hidden" name="custom" value="blank">
                    <input type="hidden" name="a3" value="500">
                    <input type="hidden" name="p3" value="1">
                    <input type="hidden" name="t3" value="M">
                    <input type="hidden" name="src" value="1">
                    <input type="hidden" name="srt" value="24">
                    <input type="hidden" name="no_note" value="1">
                    
                    <input type="submit" style="display: none;" id="submitRecurringPaypal">
                </form>

                <div class="awaiting-confirmation">
                    <div>
                        <strong>Venter p√• bekreftelse p√• innbetaling fra tredjepart</strong>
                        <img src="https://storage.googleapis.com/effekt-widget/assets/loading.svg">
                    </div>
                </div>
            </div>

            <div class="pane vipps">
                <div class="inner">
                    <img src="https://storage.googleapis.com/effekt-widget/assets/logos/vipps.png" class="header">
                    <ul>
                        <li>
                            <div class="list-point">1</div>
                            <div class="text">Velg <strong>betal</strong> i Vipps-appen</div>
                            <div class="explanatory-image" data-index="0"></div>
                        </li>
                        <li>
                            <div class="list-point">2</div>
                            <div class="text">S√∏k etter og velg gieffektivt.no eller #576742</div>
                            <div class="explanatory-image" data-index="1"></div>
                        </li>
                        <li>
                            <div class="list-point">3</div>
                            <div class="text">F√∏r inn bel√∏p og KID: <strong id="vipps-donation-kid"></strong> i meldingsfeltet</div>
                            <div class="explanatory-image" data-index="2"></div>
                        </li>
                        <li>
                            <div class="list-point">4</div>
                            <div class="text">Bekreft donasjon </div>
                            <div class="explanatory-image" data-index="3"></div></li>
                        <li>
                            <div class="list-point">5</div>
                            <div class="text">Kvittering</div>
                            <div class="explanatory-image" data-index="4"></div>
                        </li>
                    </ul>

                    <div class="helper-images">
                        <div class="close-btn">Lukk skjermbilde</div>
                        <div class="explanation-image" style="background-image: url('https://storage.googleapis.com/effekt-widget/assets/vipps/1.jpg');"></div>
                        <div class="explanation-image" style="background-image: url('https://storage.googleapis.com/effekt-widget/assets/vipps/2.jpg');"></div>
                        <div class="explanation-image" style="background-image: url('https://storage.googleapis.com/effekt-widget/assets/vipps/3.jpg');"></div>
                        <div class="explanation-image" style="background-image: url('https://storage.googleapis.com/effekt-widget/assets/vipps/4.jpg');"></div>
                        <div class="explanation-image" style="background-image: url('https://storage.googleapis.com/effekt-widget/assets/vipps/5.jpg');"></div>
                    </div>
                </div>
            </div>

            <div class="pane result">
                <div class="inner">
                    <h3>Takk!</h3>

                    <img src="https://storage.googleapis.com/effekt-widget/assets/heart.svg" class="heart">

                    <div class="result-type bank-pending">
                        <h4>Du kan n√• overf√∏re til oss.</h4>
                            
                        <div class="transfer-info">
                            <div class="line">
                                <label>Kontonr</label><span class="account select-on-click" x-ms-format-detection="none">1506 29 95960</span>
                            </div>
                            <div class="line">
                                <label>KID</label><span class="KID select-on-click" x-ms-format-detection="none" id="bank-kid"></span>
                            </div>
                        </div>
                        <span class="email-text">Vi har ogs√• sendt en mail til <font class="email"></font> med informasjon om din donasjon. Sjekk s√∏ppelpost-mappen om du ikke har mottatt eposten i l√∏pet av noen timer.</span>
                    </div>

                    <div class="result-type vipps-pending">
                        <p>Vi bruker vanligvis noen dager p√• √• bekrefte Vipps-donasjoner. Du vil f√• en mail til <font class="email"></font> n√•r vi har bekreftet din donasjon. Sjekk s√∏ppelpost-mappen om du ikke har mottatt eposten i l√∏pet av noen dager.</p>
                    </div>

                    <div class="result-type donation-confirmed">
                        <p>Vi har n√• mottatt din donasjon! Vi har ogs√• sendt en kvittering til <font class="email"></font> med mer informasjon. Sjekk s√∏ppelpost-mappen om du ikke har mottatt eposten i l√∏pet av noen timer.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="error"></div>
        <div class="progress" style="width: 0%;"></div>
    </div>
</div>
</div>

<script src="dist/bundle.js"></script>
<script>
var donationWidgetElement = document.getElementById("donation-widget");
var widget = new DonationWidget();
widget.setup(widget, donationWidgetElement);
document.getElementById("donation-btn").addEventListener("click", function(e) {
    widget.show();
});

const prodSelector = document.getElementById("selector-production")
const localSelector = document.getElementById("selector-local")

var localUrl = "http://localhost:80/"
const prodUrl = "https://api.gieffektivt.no/"

if (widget.network.api_url === "https://api.gieffektivt.no/")
    prodSelector.classList.add("active")
else if (widget.network.api_url.indexOf("localhost") !== -1) {
    localUrl = widget.network.api_url
    localSelector.classList.add("active")
}
else
    alert("Could not determine API url from widget.network.api_url")

prodSelector.addEventListener("click", () => {
    prodSelector.classList.add("active")
    localSelector.classList.remove("active")
    widget.network.api_url = prodUrl
})

localSelector.addEventListener("click", () => {
    localSelector.classList.add("active")
    prodSelector.classList.remove("active")
    widget.network.api_url = localUrl
})
</script>

</body></html>